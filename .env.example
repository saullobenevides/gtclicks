# =============================================================================
# GTClicks - Variáveis de ambiente
# Copie este arquivo para .env e preencha os valores.
# =============================================================================

# --- Banco de dados (PostgreSQL / Neon) ---
# Neon: DATABASE_URL com -pooler no host (serverless); DIRECT_DATABASE_URL sem pooler (migrations)
# Outros: use a mesma URL em ambos
DATABASE_URL="postgresql://user:password@host:5432/database?sslmode=require"
DIRECT_DATABASE_URL="postgresql://user:password@host:5432/database?sslmode=require"

# --- Stack Auth (Neon Auth) ---
NEXT_PUBLIC_STACK_PROJECT_ID=""
NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY="pck_..."
STACK_SECRET_SERVER_KEY="ssk_..."

# --- Storage S3 ---
S3_UPLOAD_BUCKET="seu-bucket"
S3_UPLOAD_REGION="sa-east-1"
S3_UPLOAD_ACCESS_KEY_ID=""
S3_UPLOAD_SECRET_ACCESS_KEY=""

# --- Mercado Pago ---
MERCADOPAGO_ACCESS_TOKEN=""
NEXT_PUBLIC_MERCADOPAGO_PUBLIC_KEY=""

# Secret do Webhook (Your integrations > Webhooks > gerar em Save)
# Opcional: se não definir, o webhook aceita sem validar assinatura
# MERCADOPAGO_WEBHOOK_SECRET=""

# --- Asaas (Checkout + Saques PIX) ---
# OBRIGATÓRIO para checkout. Sem isso, o checkout não funciona.
# Vercel: adicione em Settings > Environment Variables (sem escape do $)
# API Key em Integrações > Minha conta > API
# A chave começa com $ - escape com \ para funcionar no .env local
# ASAAS_API_KEY="\$aact_prod_xxxxxxxx"
ASAAS_API_KEY=
# Webhook compra aprovada (notifica comprador + fotógrafo): Integrações > Webhooks,
# ative a opção "Checkouts" e use URL: {APP_URL}/api/webhooks/asaas
# Token opcional (header asaas-access-token):
# ASAAS_WEBHOOK_TOKEN=""

# Autorização automática de saques (sem confirmação por SMS no painel Asaas):
# 1. No Asaas: Menu > Integrações > Mecanismos de segurança
# 2. URL do Webhook: {APP_URL}/api/webhooks/asaas/transfer-auth (deve ser acessível pela internet)
# 3. Token (opcional): defina aqui e repita no Asaas (header asaas-access-token)
# ASAAS_WEBHOOK_TRANSFER_TOKEN=""
# Se aparecer "Autorização externa foi recusada" no Asaas, veja os logs: [Asaas transfer-auth] refused ...
#
# Eventos de transferência (falha/cancelamento): quando o PIX falha, o valor volta ao saldo do fotógrafo.
# No Asaas: Integrações > Webhooks > ative "Transferências" e URL: {APP_URL}/api/webhooks/asaas/transfer-events

# --- App (URL base para webhooks e redirects) ---
# Asaas exige HTTPS e domínio registrado em Account Settings > Information.
NEXT_PUBLIC_APP_URL="https://gtclicks.com.br"

# --- Opcionais ---
# E-mail (Resend)
RESEND_API_KEY=""

# Reconhecimento facial (AWS Rekognition)
REKOGNITION_COLLECTION_ID="gtclicks-faces"

# Analytics
NEXT_PUBLIC_GA_ID=""

# Mapas (PlaceSelector)
NEXT_PUBLIC_GOOGLE_MAPS_KEY=""

# --- Cache (Upstash Redis via Vercel Marketplace) ---
# Auto-injetadas ao conectar Upstash Redis ao projeto
# KV_REST_API_URL=""
# KV_REST_API_TOKEN=""

# Dev: usar mocks quando o banco falhar (default: false em produção)
# USE_MOCK_DATA="true"

# Bundle analyzer (npm run build com ANALYZE=true)
# ANALYZE="true"

# Logs do Prisma (query, error, warn)
# DEBUG="1"
